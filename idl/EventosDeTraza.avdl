@namespace("Integracion.Esquemas.Trazas")
protocol EsquemasProtocol {

  import idl "DatosDeReferencia.avdl";

  record Traza{

    string codigoDeEnvio;
    union { null, string } nombre=null;
    timestamp_ms cuando;
    string codigoDeContratoInterno;
    union { null, string } estadoDelEnvio=null;
    union { null, string } cicloDelEnvio=null;
    union { null, string } operador=null;
    union { null, string } estadoDeLaRendicion=null;
    union { null, string } comentario=null;
    union { null, Integracion.Esquemas.Referencias.DatosSucursal } sucursalAsociadaAlEvento=null;
  }

  record Admision{
    Traza traza;
    Integracion.Esquemas.Referencias.DatosSucursal donde;
  }

  @aliases(["AltaManual", "AltaAutomatica", "AltaRemota", "AltaConAnomalias", "AltaDeExcedente"])
  record Alta{
    Traza traza;
    Integracion.Esquemas.Referencias.DetalleDeEnvio envio;
    Integracion.Esquemas.Referencias.Contrato contrato;
  }

  record ComienzoCustodiaEnSucursal{
    Traza traza;
    int cantidadDeDiasDeLaFase;
    union { null, string } motivo=null;
    union { null, string } submotivo=null;
    union { null, Integracion.Esquemas.Referencias.DatosSucursal } sucursalDeCustodia=null;
  }

  record EliminarMarcaDeRescate{
    Traza traza;
  }

  record EnvioDesactivadoAutomaticamente{
    Traza traza;
  }

  record EnvioEntregado{
    Traza traza;
    Integracion.Esquemas.Referencias.TipoDeEntrega tipoDeEntrega;
  }

  record FinCustodiaEnSucursal{
    Traza traza;
    int cantidadDeDias;
    union { null, string } motivo=null;
    union { null, string } submotivo=null;
    union { null, Integracion.Esquemas.Referencias.DatosSucursal } sucursalDeDistribucion=null;
  }

  record OrdenDeEnvioCreada {
    Traza traza;
    Integracion.Esquemas.Referencias.DetalleDeOrdenDeEnvio datosDeLaOrden;
    union { null, map<string> } linking=null;
  }

  record ReactivacionDeBolsin{
    Traza traza;
    Integracion.Esquemas.Referencias.DatosSucursal sucursalOrigen;
    Integracion.Esquemas.Referencias.DatosSucursal sucursalDestino;
  }

  record Rescate{
    Traza traza;
    union { null, string } numeroDeInformeDeRendicion=null;
  }
}